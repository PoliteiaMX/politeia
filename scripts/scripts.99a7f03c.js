"use strict";angular.module("politicsApp",["ngAnimate","ngRoute","angularUtils.directives.dirDisqus","angulartics","angulartics.google.analytics"]).config(["$routeProvider",function(a){a.when("/events/:eventId",{templateUrl:"views/event.html",controller:"EventCtrl"}).when("/officials/:officialId",{templateUrl:"views/official.html",controller:"OfficialCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("politicsApp").controller("MainCtrl",["$rootScope","$scope",function(){}]),angular.module("politicsApp").controller("EventCtrl",["$rootScope","$scope","$routeParams","$http","$location",function(a,b,c,d,e){b.disqus={shortname:"politeiamx",identifier:null,title:null,url:null,ready:!1},d.get("data/events/"+c.eventId+".json").then(function(a){var c,d=[{id:"completed",title:"cumplidos"},{id:"failed",title:"incumplidos"},{id:"unknown",title:"desconocidos"},{id:"pending",title:"pendientes"}];b.event=a.data,c=_.countBy(b.event.commitments,"status"),b.event.statusBreakdown=_.map(d,function(a){return a.count=c[a.id]?c[a.id]:0,a}),b.disqus.identifier=b.event.id,b.disqus.title=b.event.title,b.disqus.url=e.absUrl(),b.disqus.ready=!0})}]),angular.module("politicsApp").controller("OfficialCtrl",["$rootScope","$scope","$routeParams","$http",function(a,b,c,d){d.get("data/officials/"+c.officialId+".json").then(function(a){b.official=a.data})}]),angular.module("politicsApp").filter("nullFilter",function(){return function(a){return null===a?"?":a}}),angular.module("politicsApp").directive("piechart",function(){return{template:"<div></div>",restrict:"E",link:function(a,b,c){var d,e,f,g,h=150,i=150,j=Math.min(h,i)/2;d=d3.select(b[0]).append("svg").attr("width",h).attr("height",i).append("g").attr("transform","translate("+h/2+","+i/2+")"),e=d3.svg.arc().outerRadius(j-10).innerRadius(0),f=d3.layout.pie().sort(function(a){return a.count}).value(function(a){return a.count}),a.$watch(c.data,function(a,b){a!==b&&(g=d.selectAll(".arc").data(f(a)).enter().append("g").attr("class","arc"),g.append("path").attr("d",e).attr("class",function(a){return a.data.id}))})}}});